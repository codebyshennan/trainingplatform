<%- include('header', {index: `${output.index}`, title: `${output.title}`}) -%>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@2.0"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@0.2.1"></script>
<script src="/static/chart.js" defer></script>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a
      class="nav-link active"
      id="home-tab"
      data-bs-toggle="tab"
      href="#home"
      role="tab"
      aria-controls="home"
      aria-selected="true"
      >Home</a
    >
  </li>
  <li class="nav-item">
    <a
      class="nav-link"
      id="profile-tab"
      data-bs-toggle="tab"
      href="#profile"
      role="tab"
      aria-controls="profile"
      aria-selected="false"
      >Profile</a
    >
  </li>
  <li class="nav-item">
    <a
      class="nav-link"
      id="contact-tab"
      data-bs-toggle="tab"
      href="#contact"
      role="tab"
      aria-controls="contact"
      aria-selected="false"
      >Contact</a
    >
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div
    class="tab-pane fade show active"
    id="home"
    role="tabpanel"
    aria-labelledby="home-tab"
  >
    <div
      class="chart-container"
      style="position: relative; height: 40vh; width: 40vw"
    >
      <!-- <canvas id="myChart"></canvas> -->
    </div>
    <div
      class="chart-container"
      style="position: relative; height: 40vh; width: 40vw"
    >
      <canvas id="testchart"></canvas>
    </div>
  </div>
  <div
    class="tab-pane fade"
    id="profile"
    role="tabpanel"
    aria-labelledby="profile-tab"
  >
    ...
  </div>
  <div
    class="tab-pane fade"
    id="contact"
    role="tabpanel"
    aria-labelledby="contact-tab"
  >
    ...
  </div>
</div>

<script>
  var testChart = new Chart(document.getElementById("testchart"), {
    type: "line",
    data: {
      datasets: [
        {
          label: "My First dataset",
          backgroundColor: "rgb(255, 99, 132)",
          borderColor: "rgb(255, 99, 132)",
          data: <%- JSON.stringify(output.chartdata) %>,
        },
      ],
    },
    options: {
      scales: {
        x: {
          type: "time",
          time: {
            unit: "day",
          },
        },
        y: {
          ticks: {
            stepSize: 10.0,
          },
        },
      },
      parsing: {
        xAxisKey: "date",
        yAxisKey: "distance",
      },
    },
  });
</script>
